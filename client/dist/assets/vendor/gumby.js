!function(){"use strict";function a(){this.$dom=$(document),this.isOldie=!!this.$dom.find("html").hasClass("oldie"),this.click="click",this.onReady=this.onOldie=this.onTouch=!1,this.uiModules={},this.inits={}}a.prototype.init=function(){this.initUIModules();var a=this;this.$dom.ready(function(){a.onReady&&a.onReady(),a.isOldie&&a.onOldie&&a.onOldie(),Modernizr.touch&&a.onTouch&&a.onTouch()})},a.prototype.ready=function(a){a&&"function"==typeof a&&(this.onReady=a)},a.prototype.oldie=function(a){a&&"function"==typeof a&&(this.onOldie=a)},a.prototype.touch=function(a){a&&"function"==typeof a&&(this.onTouch=a)},a.prototype.debug=function(){return{$dom:this.$dom,isOldie:this.isOldie,uiModules:this.uiModules,click:this.click}},a.prototype.selectAttr=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a],c="data-"+arguments[a],d="gumby-"+arguments[a];if(this.attr(c))return this.attr(c);if(this.attr(d))return this.attr(d);if(this.attr(b))return this.attr(b)}return!1},a.prototype.addInitalisation=function(a,b){this.inits[a]=b},a.prototype.initialize=function(a){this.inits[a]&&"function"==typeof this.inits[a]&&this.inits[a]()},a.prototype.UIModule=function(a){var b=a.module;this.uiModules[b]=a},a.prototype.initUIModules=function(){var a;for(a in this.uiModules)this.uiModules[a].init()},window.Gumby=new a}(),!function(){"use strict";function a(a){this.$el=a;var b=this;this.$el.on(Gumby.click,function(a){b.click(a)}).on("gumby.check",function(){b.update(!0)}).on("gumby.uncheck",function(){b.update(!1)}),b.$el.hasClass("checked")&&b.update(!0)}a.prototype.click=function(a){$(a.target);a.stopPropagation(),a.preventDefault(),this.$el.hasClass("checked")?this.update(!1):this.update(!0)},a.prototype.update=function(a){a?this.$el.find("input").prop("checked",!0).end().addClass("checked").append('<i class="icon-check" />').trigger("gumby.onCheck").trigger("gumby.onChange"):this.$el.find("input").prop("checked",!1).end().find("i").remove().end().removeClass("checked").trigger("gumby.onUncheck").trigger("gumby.onChange")},Gumby.addInitalisation("checkboxes",function(){$(".checkbox").each(function(){var b=$(this);return b.data("isCheckbox")?!0:(b.data("isCheckbox",!0),new a(b),void 0)})}),Gumby.UIModule({module:"checkbox",events:["onCheck","onUncheck","onChange","check","uncheck"],init:function(){Gumby.initialize("checkboxes")}})}(),!function(){"use strict";function a(a){if(this.$el=a,this.$holder=Gumby.selectAttr.apply(this.$el,["holder"]),this.fixedPoint=Gumby.selectAttr.apply(this.$el,["fixed"]),this.unfixPoint=!1,this.$holder=this.$holder?$(this.$holder):$(window),this.fixedPoint.indexOf("|")>-1){var b=this.fixedPoint.split("|");this.fixedPoint=b[0],this.unfixPoint=b[1]}this.fixedPoint=this.parseAttrValue(this.fixedPoint),this.unfixPoint&&(this.unfixPoint=this.parseAttrValue(this.unfixPoint));var c=this;this.$holder.scroll(function(){c.scroll()})}a.prototype.scroll=function(){{var a=this.$holder.scrollTop(),b=this.fixedPoint,c=this.unfixPoint;this.endPoint}b=b instanceof jQuery?this.fixedPoint.offset().top:this.fixedPoint,c=c instanceof jQuery?this.unfixPoint.offset().top:this.unfixPoint,c||(c=2*a),a>=b&&c>a&&!this.$el.hasClass("fixed")?this.$el.addClass("fixed").trigger("gumby.onFixed"):b>=a&&this.$el.hasClass("fixed")&&this.$el.removeClass("fixed").trigger("gumby.onUnfixed",0),c&&a>=c&&this.$el.hasClass("fixed")&&this.$el.removeClass("fixed").trigger("gumby.onUnfixed",1)},a.prototype.parseAttrValue=function(a){if($.isNumeric(a))return Number(a);if("top"===a)return this.$el.offset().top;var b=$(a);return b.length?b:!1},Gumby.addInitalisation("fixed",function(){$("[data-fixed],[gumby-fixed],[fixed]").each(function(){var b=$(this);return b.data("isFixed")?!0:(b.data("isFixed",!0),new a(b),void 0)})}),Gumby.UIModule({module:"fixed",events:["onFixed","onUnfixed"],init:function(){Gumby.initialize("fixed")}})}(),!function(){"use strict";function a(a){this.$el=a;var b=this;this.$el.find("li").on(Gumby.click,function(a){var c=$(this);a.stopPropagation(),"#"===this.href&&a.preventDefault(),b.dropdown(c)})}Modernizr.touch&&(a.prototype.dropdown=function(a){a.children(".dropdown").length?a.hasClass("active")?a.removeClass("active"):a.addClass("active"):this.$items.removeClass("active")},Gumby.addInitalisation("navbars",function(){$(".navbar").each(function(){var b=$(this);return b.data("isNavbar")?!0:(b.data("isNavbar",!0),new a(b),void 0)})}),Gumby.UIModule({module:"navbar",events:[],init:function(){Gumby.initialize("navbars")}}))}(),!function(){"use strict";function a(a){this.$el=a;var b=this;this.$el.on(Gumby.click,function(a){b.click(a)}).on("gumby.check",function(){b.update()}),b.$el.hasClass("checked")&&b.update()}a.prototype.click=function(a){$(a.target);a.stopPropagation(),a.preventDefault(),this.update()},a.prototype.update=function(){var a=this.$el.find("input[type=radio]"),b='input[name="'+a.attr("name")+'"]';$(".radio").has(b).removeClass("checked").find("input").prop("checked",!1).end().find("i").remove(),a.prop("checked",!0),this.$el.append('<i class="icon-dot" />').addClass("checked").trigger("gumby.onChange")},Gumby.addInitalisation("radiobtns",function(){$(".radio").each(function(){var b=$(this);return b.data("isRadioBtn")?!0:(b.data("isRadioBtn",!0),new a(b),void 0)})}),Gumby.UIModule({module:"radiobtn",events:["onChange","check"],init:function(){Gumby.initialize("radiobtns")}})}(),!function(){"use strict";function a(a){this.$el=a,this.imageSrc=this.$el.attr("src"),this.retinaSrc=this.fetchRetinaImage(),this.$retinaImg=$(new Image);var b=this;return this.retinaSrc?(this.$retinaImg.attr("src",this.retinaSrc).load(function(){b.retinaImageLoaded()}),void 0):!1}a.prototype.fetchRetinaImage=function(){var a=this.imageSrc,b=this.imageSrc.search(/(\.|\/)(gif|jpe?g|png)$/i);return 0>b?!1:a.substr(0,b)+"@2x"+a.substr(b,a.length)},a.prototype.retinaImageLoaded=function(){this.$el.attr("src",this.$retinaImg.attr("src")).trigger("gumby.onRetina")},Gumby.addInitalisation("retina",function(){!window.devicePixelRatio||window.devicePixelRatio<=1||$("img[data-retina],img[gumby-retina],img[retina]").each(function(){var b=$(this);return b.data("isRetina")?!0:(b.data("isRetina",!0),new a(b),void 0)})}),Gumby.UIModule({module:"retina",events:["onRetina"],init:function(){Gumby.initialize("retina")}})}(),!function(){"use strict";function a(a){this.$el=a,this.targetPos=0,this.duration=Number(Gumby.selectAttr.apply(this.$el,["duration"]))||200,this.offset=Gumby.selectAttr.apply(this.$el,["offset"])||!1,this.easing=Gumby.selectAttr.apply(this.$el,["easing"])||"swing";var b=this;this.$el.on(Gumby.click+" gumby.skip",function(a){a.preventDefault(),b.calculateTarget()})}a.prototype.calculateTarget=function(){var a,b=Gumby.selectAttr.apply(this.$el,["goto"]);if("top"==b)this.targetPos=0;else if($.isNumeric(b))this.targetPos=Number(b);else{if(a=$(b),!a)return!1;this.targetPos=a.offset().top}this.skipTo()},a.prototype.skipTo=function(){var a=this;$("html,body").animate({scrollTop:this.calculateOffset()},this.duration,this.easing).promise().done(function(){a.$el.trigger("gumby.onComplete")})},a.prototype.calculateOffset=function(){if(!this.offset)return this.targetPos;var a=this.offset.substr(0,1),b=Number(this.offset.substr(1,this.offset.length));return"-"===a?this.targetPos-b:"+"===a?this.targetPos+b:void 0},Gumby.addInitalisation("skiplinks",function(){$(".skiplink > a, .skip").each(function(){var b=$(this);return b.data("isSkipLink")?!0:(b.data("isSkipLink",!0),new a(b),void 0)})}),Gumby.UIModule({module:"skiplink",events:["onComplete","skip"],init:function(){Gumby.initialize("skiplinks")}})}(),!function(){"use strict";function a(a){this.$el=a,this.$nav=this.$el.find("ul.tab-nav > li"),this.$content=this.$el.find(".tab-content");var b=this;this.$nav.children("a").on(Gumby.click,function(a){a.preventDefault(),b.click($(this))}),this.$el.on("gumby.set",function(a,c){b.set(a,c)})}a.prototype.click=function(a){var b=a.parent().index();this.$nav.add(this.$content).removeClass("active"),this.$nav.eq(b).add(this.$content.eq(b)).addClass("active"),this.$el.trigger("gumby.onChange",b)},a.prototype.set=function(a,b){this.$nav.eq(b).find("a").trigger(Gumby.click)},Gumby.addInitalisation("tabs",function(){$(".tabs").each(function(){var b=$(this);return b.data("isTabs")?!0:(b.data("isTabs",!0),new a(b),void 0)})}),Gumby.UIModule({module:"tabs",events:["onChange","set"],init:function(){Gumby.initialize("tabs")}})}(),!function(){"use strict";function a(a){this.$el=$(a),this.targets=[],this.on="",this.$el.length&&this.init()}function b(a){this.$el=$(a),this.targets=[],this.on="",this.$el.length&&this.init()}a.prototype.init=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click;var a=this;this.$el.on(this.on,function(b){"A"===$(this).prop("tagName")&&b.preventDefault(),b.stopPropagation(),a.trigger(a.triggered)}).on("gumby.trigger",function(){a.trigger(a.triggered)})},a.prototype.parseTargets=function(){var a=Gumby.selectAttr.apply(this.$el,["trigger"]),b=0,c=[];return a?(b=a.indexOf("|"),-1===b?[$(a)]:(c=a.split("|"),c.length>1?[$(c[0]),$(c[1])]:[$(c[0])])):!1},a.prototype.triggered=function(){this.$el.trigger("gumby.onTrigger",[this.$el.hasClass("active")])},b.prototype=new a,a.prototype.trigger=function(a){this.targets?1==this.targets.length?this.$el.add(this.targets[0]).toggleClass("active"):this.targets.length>1&&(this.targets[0].hasClass("active")?(this.$el.add(this.targets[0]).removeClass("active"),this.targets[1].addClass("active")):(this.targets[1].removeClass("active"),this.$el.add(this.targets[0]).addClass("active"))):this.$el.toggleClass("active"),a&&"function"==typeof a&&a.apply(this)},b.prototype.trigger=function(a){this.targets?1==this.targets.length?this.$el.add(this.targets[0]).addClass("active"):this.targets.length>1&&(this.$el.add(this.targets[0]).addClass("active"),this.targets[1].removeClass("active")):this.$el.addClass("active"),a&&"function"==typeof a&&a.apply(this)},Gumby.addInitalisation("toggles",function(){$(".toggle").each(function(){var b=$(this);return b.data("isToggle")?!0:(b.data("isToggle",!0),new a(b),void 0)})}),Gumby.addInitalisation("switches",function(){$(".switch").each(function(){var a=$(this);return a.data("isSwitch")?!0:(a.data("isSwitch",!0),new b(a),void 0)})}),Gumby.UIModule({module:"toggleswitch",events:["trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(),!function(a){"use strict";function b(a,b){this.$this=a,this.$field=this.$this.parents(".field"),this.req=b||function(){return!!this.$this.val().length};var c=this;this.$this.is("[type=checkbox], [type=radio]")?(this.$field=this.$this.parent("label"),this.$field.on("gumby.onChange",function(){c.validate()})):this.$this.is("select")?(this.$field=this.$this.parents(".picker"),this.$field.on("change",function(){c.validate()})):this.$this.on("blur",function(a){9!==a.which&&c.validate()})}b.prototype.validate=function(){var a=this.req(this.$this);return a?this.$field.removeClass("danger").addClass("success"):this.$field.removeClass("success").addClass("danger"),a},a.fn.validation=function(c){var d=a.extend({submit:!1,fail:!1,required:[]},c),e=[];return this.each(function(){if(!d.required.length)return!1;var c,f=a(this),g=d.required.length;for(c=0;g>c;c++)e.push(new b(f.find('[name="'+d.required[c].name+'"]'),d.required[c].validate||!1));f.on("submit",function(a){var b=!1;if(!f.data("passed")){a.preventDefault();var c,g=e.length;for(c=0;g>c;c++)e[c].validate()||(b=!0);if(b){if(d.fail&&"function"==typeof d.fail)return d.fail(),void 0}else{if(d.submit&&"function"==typeof d.submit)return d.submit(f.serializeArray()),void 0;f.data("passed",!0).submit()}}})})}}(jQuery),Modernizr.load({test:Modernizr.touch,yep:"js/libs/jquery.mobile.custom.min.js",callback:function(){$.mobile&&(window.Gumby.click="tap")},complete:function(){window.Gumby.init(),"function"==typeof define&&define.amd&&define(window.Gumby)}});