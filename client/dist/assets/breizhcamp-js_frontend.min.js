/**
 * breizhcamp-js_frontend - v0.0.1 - 2013-06-11
 * https://github.com/xseignard/breizhcamp-js
 *
 * Copyright (c) 2013 
 * Licensed MIT
 */
angular.module("bzh.geektic.animations",[]).animation("list-out",["$window",function(a){return{start:function(b,c){var d=1;TweenMax.set(b,{position:"relative"}),TweenMax.to(b,d,{opacity:0,width:0}),a.setTimeout(c,1e3*d)}}}]).animation("list-in",["$window",function(a){return{setup:function(a){TweenMax.set(a,{opacity:0,width:0})},start:function(b,c){var d=1;TweenMax.to(b,d,{opacity:1,width:210}),a.setTimeout(c,1e3*d)}}}]).animation("list-move",["$window",function(a){return{start:function(b,c){var d=1;TweenMax.to(b,d,{opacity:1,width:210}),a.setTimeout(c,1e3*d)}}}]).animation("details-leave",function(){return{setup:function(a){var b=a.find(".ani");return TweenMax.set(b,{position:"relative"}),b},start:function(a,b,c){TweenMax.staggerTo(c,1,{left:-500,opacity:0},.1,b)}}}).animation("details-enter",["$window",function(a){return{setup:function(a){var b=a.find(".ani");return TweenMax.set(b,{position:"relative",left:500,opacity:0}),b},start:function(b,c,d){var e=b.parent(".details"),f=e.children().length>1?300:1;a.setTimeout(function(){TweenMax.staggerTo(d,1,{left:0,opacity:1},.1,c)},f)}}}]).animation("details-show",function(){return{start:function(a,b){TweenMax.set(a,{height:0,display:"block"}),TweenMax.to(a,.5,{height:250,onComplete:b})}}}).animation("details-hide",function(){return{start:function(a,b){TweenMax.to(a,.5,{height:0,onComplete:function(){b(),a.remove()}})}}}),angular.module("bzh.geektic.appCtrl",["ngResource"]).controller("AppCtrl",["$scope","$rootScope","$resource",function(a,b,c){var d=c("/geek/likes/:like");a.geeks=d.query(),a.more=function(){var c={limit:6,skip:a.geeks.length};a.q&&a.q.length>0&&(c.like=a.q),d.query(c,function(c){angular.forEach(c,function(b){b instanceof d&&a.geeks.push(b)}),b.$broadcast("results"),a.scroll()})},a.scroll=function(){TweenMax.to(window,.5,{delay:.9,scrollTo:"max",ease:Power2.easeOut})},a.gravatar=function(a,b){return"http://www.gravatar.com/avatar/"+md5(a)+"?d=mm&s="+b}}]),angular.module("bzh.geektic.details",[]).directive("bzhDetails",["$rootScope","$compile","$animator",function(a,b,c){var d,e,f,g=-1;a.$on("results",function(){d&&(e.remove(),f=e=d=g=null)});var h=function(a){for(var b=a.parent().children(".result"),c=0,d=a.attr("id"),e=b.filter(function(){return $(this).position().top===a.position().top}),f=0;f<b.length;f++){var g=b[f].id;if(0===f%e.length&&c++,g===d)break}return{index:c,items:e}};return function(a,i,j){i.bind("click",function(){if(f!==i.attr("id")){var k=c(a,{ngAnimate:j.bzhDetails}),l=h(i);e&&(l.index!==g?(k.hide(e),e=d=null):k.leave(d)),g=l.index,f=i.attr("id");var m=!e;m&&(e=angular.element('<div class="details"></div>'),angular.element(l.items[0]).before(e),e.hide()),d=angular.element('<div ng-include="\'details\'" class="details-slide"></div>'),b(d)(a),a.$apply(),k.enter(d,e),m&&k.show(e)}})}}]),angular.module("bzh.geektic",["bzh.geektic.appCtrl","bzh.geektic.details","bzh.geektic.animations","bzh.geektic.templates"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"app/index/partials/list.tpl.html"}).otherwise({redirectTo:"/"})}]),angular.module("bzh.geektic.templates",["app/index/partials/list.tpl.html"]),angular.module("app/index/partials/list.tpl.html",[]).run(["$templateCache",function(a){a.put("app/index/partials/list.tpl.html",'<script type="text/ng-template" id="details">\n  <div class="details-inner">\n    <div class="inner">\n      <h4 class="ani">{{result.lastname}} {{result.firstname}}</h4>\n      <div class="ani line">\n        <img ng-src="{{gravatar(result.email, 140)}}" />\n      </div>\n      <div class="ani line">\n        <p ng-hide="!result.city" class="ani line">Living in {{result.city}}</p>\n        <p><i class="icon-thumbs-up" /> : \n          <span ng-repeat="like in result.likes">\n            {{like}}\n            <span ng-if="!$last">, </span>\n          </span>\n        </p>\n        <p><i class="icon-thumbs-down" /> : \n          <span ng-repeat="hate in result.hates">\n            {{hate}}\n            <span ng-if="!$last">, </span>\n          </span>\n        </p>\n      </div>\n    </div>\n  </div>\n</script>\n\n<div class="results">\n  <a href="" \n     bzh-details="{enter:\'details-enter\',leave:\'details-leave\',show:\'details-show\',hide:\'details-hide\'}"\n     id="id-{{result.lastname}}{{result.firstname}}" \n     ng-repeat="result in geeks | filter: {likes :q}" \n     class="result" \n     ng-animate="{leave:\'list-out\', enter:\'list-in\', move:\'list-move\'}">\n    <div class="inner">\n      <h5>{{result.lastname}} {{result.firstname}}</h5>\n      <img ng-src="{{gravatar(result.email, 140)}}" />\n    </div>\n  </a>\n  <div class="load-more-results">\n    <div  class="medium btn info">\n      <a href="" ng-click="more()">\n        <i class="icon-search"></i>\n        Load More Results\n      </a>\n    <div>\n  </div>\n</div>\n')}]);